"use strict";(self.webpackChunksimple_jwt_login_website=self.webpackChunksimple_jwt_login_website||[]).push([[8459],{82953:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"Hooks","title":"Hooks","description":"This plugin allows advanced users to link some hooks with the plugin and perform some custom scripts.","source":"@site/docs/Hooks.md","sourceDirName":".","slug":"/hooks/","permalink":"/website/docs/hooks/","draft":false,"unlisted":false,"editUrl":"https://github.com/simple-jwt-login/website/tree/main/docs/Hooks.md","tags":[],"version":"current","sidebarPosition":97,"frontMatter":{"slug":"/hooks/","title":"Hooks","sidebar_position":97,"author":"Nicu Micle","author_url":"https://github.com/nicumicle"},"sidebar":"tutorialSidebar","previous":{"title":"Protect Endpoints","permalink":"/website/docs/protect-endpoints/"},"next":{"title":"CORS","permalink":"/website/docs/cors/"}}');var r=n(74848),t=n(28453);const l={slug:"/hooks/",title:"Hooks",sidebar_position:97,author:"Nicu Micle",author_url:"https://github.com/nicumicle"},o=void 0,d={},a=[{value:"List Of Hooks",id:"list-of-hooks",level:2},{value:"1. simple_jwt_login_login_hook",id:"1-simple_jwt_login_login_hook",level:3},{value:"2. simple_jwt_login_redirect_hook",id:"2-simple_jwt_login_redirect_hook",level:3},{value:"3. simple_jwt_login_register_hook",id:"3-simple_jwt_login_register_hook",level:3},{value:"4. simple_jwt_login_delete_user_hook",id:"4-simple_jwt_login_delete_user_hook",level:3},{value:"5. simple_jwt_login_jwt_payload_auth",id:"5-simple_jwt_login_jwt_payload_auth",level:3},{value:"6. simple_jwt_login_no_redirect_message",id:"6-simple_jwt_login_no_redirect_message",level:3},{value:"7. simple_jwt_login_reset_password_custom_email_template",id:"7-simple_jwt_login_reset_password_custom_email_template",level:3},{value:"8. simple_jwt_login_response_auth_user",id:"8-simple_jwt_login_response_auth_user",level:3},{value:"9. simple_jwt_login_response_delete_user",id:"9-simple_jwt_login_response_delete_user",level:3},{value:"10. simple_jwt_login_response_refresh_token",id:"10-simple_jwt_login_response_refresh_token",level:3},{value:"11. simple_jwt_login_response_register_user",id:"11-simple_jwt_login_response_register_user",level:3},{value:"12. simple_jwt_login_response_send_reset_password",id:"12-simple_jwt_login_response_send_reset_password",level:3},{value:"13. simple_jwt_login_response_change_user_password",id:"13-simple_jwt_login_response_change_user_password",level:3},{value:"14. simple_jwt_login_response_revoke_token",id:"14-simple_jwt_login_response_revoke_token",level:3},{value:"15. simple_jwt_login_response_validate_token",id:"15-simple_jwt_login_response_validate_token",level:3},{value:"16. simple_jwt_login_before_endpoint",id:"16-simple_jwt_login_before_endpoint",level:3},{value:"Screenshot",id:"screenshot",level:2},{value:"Code Examples",id:"code-examples",level:2},{value:"Send an email after a new user has been created.",id:"send-an-email-after-a-new-user-has-been-created",level:3},{value:"Add some custom data in the JWT payload on the <code>/auth</code> endpoint",id:"add-some-custom-data-in-the-jwt-payload-on-the-auth-endpoint",level:3},{value:"Dynamic Redirection URLs After Login",id:"dynamic-redirection-urls-after-login",level:3},{value:"Block requests on /auth for a specific email address",id:"block-requests-on-auth-for-a-specific-email-address",level:3},{value:"Set minimum password length on register",id:"set-minimum-password-length-on-register",level:3}];function c(e){const s={admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"This plugin allows advanced users to link some hooks with the plugin and perform some custom scripts."}),"\n",(0,r.jsx)(s.p,{children:"You are able to enable/disable any of these hooks."}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"By default, no hooks are enabled. You need to check the one that you want to use."})}),"\n",(0,r.jsx)(s.h2,{id:"list-of-hooks",children:"List Of Hooks"}),"\n",(0,r.jsx)(s.h3,{id:"1-simple_jwt_login_login_hook",children:"1. simple_jwt_login_login_hook"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": action"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": Wp_User $user"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This hook it is called after the user has been logged in."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"2-simple_jwt_login_redirect_hook",children:"2. simple_jwt_login_redirect_hook"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": action"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": string $url, array $request"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This hook it is called before the user it will be redirected to the page he specified in the login section."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"3-simple_jwt_login_register_hook",children:"3. simple_jwt_login_register_hook"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": action"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": Wp_User $user, string $plain_text_password"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This hook it is called after a new user has been created."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"4-simple_jwt_login_delete_user_hook",children:"4. simple_jwt_login_delete_user_hook"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": action"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": Wp_User $user"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This hook it is called right after the user has been deleted."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"5-simple_jwt_login_jwt_payload_auth",children:"5. simple_jwt_login_jwt_payload_auth"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": filter"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": array $payload, array $request"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"return"}),": array $payload"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This hook is called on /auth endpoint. Here you can modify payload parameters."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"6-simple_jwt_login_no_redirect_message",children:"6. simple_jwt_login_no_redirect_message"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": filter"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": array $payload, array $request"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"return"}),": array $payload"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This hook is called on /autologin endpoint when the option No Redirect is selected. You can customize the message and add parameters."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"7-simple_jwt_login_reset_password_custom_email_template",children:"7. simple_jwt_login_reset_password_custom_email_template"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": filter"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": string $template, array $request"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"return"}),": string $template"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This is executed when POST /user/reset_password is called. It will replace the email template that has been added in Reset Password settings."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"8-simple_jwt_login_response_auth_user",children:"8. simple_jwt_login_response_auth_user"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": filter"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": array $response, WP_User $user"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"return"}),": array $response"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This is executed before displaying the response of auth endpoint."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"9-simple_jwt_login_response_delete_user",children:"9. simple_jwt_login_response_delete_user"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": filter"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": array $response, WP_User $user"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"return"}),": array $response"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This is executed before displaying the response of delete user endpoint."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"10-simple_jwt_login_response_refresh_token",children:"10. simple_jwt_login_response_refresh_token"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": filter"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": array $response, WP_User $user"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"return"}),": array $response"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This is executed before displaying the response of refresh token endpoint."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"11-simple_jwt_login_response_register_user",children:"11. simple_jwt_login_response_register_user"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": filter"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": array $response, WP_User $user"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"return"}),": array $response"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This is executed before displaying the response of register user endpoint."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"12-simple_jwt_login_response_send_reset_password",children:"12. simple_jwt_login_response_send_reset_password"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": filter"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": array $response, WP_User $user"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"return"}),": array $response"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This is executed before displaying the response of send reset password endpoint."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"13-simple_jwt_login_response_change_user_password",children:"13. simple_jwt_login_response_change_user_password"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": filter"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": array $response, WP_User $user"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"return"}),": array $response"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This is executed before displaying the response of change user password endpoint."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"14-simple_jwt_login_response_revoke_token",children:"14. simple_jwt_login_response_revoke_token"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": filter"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": array $response, WP_User $user"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"return"}),": array $response"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This is executed before displaying the response of revoke token endpoint."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"15-simple_jwt_login_response_validate_token",children:"15. simple_jwt_login_response_validate_token"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": filter"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": array $response, WP_User $user"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"return"}),": array $response"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This is executed before displaying the response of validate token endpoint."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"16-simple_jwt_login_before_endpoint",children:"16. simple_jwt_login_before_endpoint"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"type"}),": action"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"parameters"}),": string $method, string $endpoint, array $request"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"description"}),": This is executed before the simple-jwt-login rest route is initialized. You can use this for all the endpoints. Endpoints can be filtered by request method and endpoint."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"screenshot",children:"Screenshot"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:"https://github.com/nicumicle/simple-jwt-login/blob/master/wordpress.org/assets/screenshot-9.png?raw=true",alt:""})}),"\n",(0,r.jsx)(s.h2,{id:"code-examples",children:"Code Examples"}),"\n",(0,r.jsx)(s.h3,{id:"send-an-email-after-a-new-user-has-been-created",children:"Send an email after a new user has been created."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"add_action( 'simple_jwt_login_register_hook', function($user, $password) {\n    $to      = $user->user_email;\n    $subject = 'Welcome';\n    $message = '\n               Welcome to My Site. Your new user credentials are: \n               email: ' . $to .'\n               password: '. $password;\n    wp_mail($to, $subject, $message);\n   }, 10, 2);\n"})}),"\n",(0,r.jsxs)(s.h3,{id:"add-some-custom-data-in-the-jwt-payload-on-the-auth-endpoint",children:["Add some custom data in the JWT payload on the ",(0,r.jsx)(s.code,{children:"/auth"})," endpoint"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"add_filter('simple_jwt_login_no_redirect_message',function($payload, $request){\n    $payload['myvalue'] = 'somevalue';\n\n    return $payload;\n}, 10, 2);\n"})}),"\n",(0,r.jsx)(s.h3,{id:"dynamic-redirection-urls-after-login",children:"Dynamic Redirection URLs After Login"}),"\n",(0,r.jsxs)(s.p,{children:["In order to achieve this, you need to check the option ",(0,r.jsx)(s.code,{children:"Include request parameters used for login link in the REDIRECT URL"})," from the Login section. After that, in your login URL, add one new parameter ",(0,r.jsx)(s.code,{children:"&page=your_page"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"add_action('simple_jwt_login_redirect_hook', function($url, $request){\n       $page = isset($_REQUEST['page'])\n           ? $_REQUEST['page']\n           : null;\n       if($page === null){\n            wp_redirect($url);\n             return;\n       } \n       switch($page){\n          case \"page1\":\n              wp_redirect('https://site1.com');\n              break;\n           case \"page2\": \n              wp_redirect('https://site2.com');\n              break;   \n       }\n}, 10, 2);\n"})}),"\n",(0,r.jsx)(s.h3,{id:"block-requests-on-auth-for-a-specific-email-address",children:"Block requests on /auth for a specific email address"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"add_action('simple_jwt_login_before_endpoint', function($method, $endpoint, $request){\n       if ($method !== 'POST' && $endpoint !== 'auth') {\n          return;\n       }\n       \n       if( isset($request['email']) && $request['email'] === 'test@domain.com') {\n           throw new Exception('Wrong email.');\n       }\n}, 10, 4);\n"})}),"\n",(0,r.jsx)(s.h3,{id:"set-minimum-password-length-on-register",children:"Set minimum password length on register"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"add_action('simple_jwt_login_before_endpoint', function($method, $endpoint, $request){\n       if ($method !== 'POST' && $endpoint !== 'users') {\n          return;\n       }\n       \n       $minLength = 8;\n       \n       if( isset($request['password']) && strlen($request['password']) < $minLength) {\n           throw new Exception('Password is too short. Password length is minimum ' . $minLength . ' characters.');\n       }\n}, 10, 4);\n"})})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>o});var i=n(96540);const r={},t=i.createContext(r);function l(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);